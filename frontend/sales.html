<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Sales - EGYA Inventory</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script src="js/common.js"></script>
</head>

<body class="flex h-screen bg-gray-100">

  <!-- Sidebar -->
  <aside class="w-64 bg-gray-800 text-white flex flex-col fixed h-full">
    <div class="p-4 text-2xl font-bold border-b border-gray-700">EGYA Inventory</div>
    <nav class="flex-1 p-4 space-y-2">
      <a href="index.html" class="block p-2 rounded hover:bg-gray-700">ðŸ“Š Dashboard</a>
      <a href="products.html" class="block p-2 rounded hover:bg-gray-700">ðŸ“¦ Products</a>
      <a href="sales.html" class="block p-2 rounded bg-gray-700">ðŸ›’ Sales</a>
      <a href="analytics.html" class="block p-2 rounded hover:bg-gray-700">ðŸ“ˆ Analytics</a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 ml-64 p-6 overflow-y-auto">
    <div class="flex justify-between items-center mb-4">
      <h1 class="text-2xl font-bold">Sales</h1>
    </div>

    <!-- Record Sale Form -->
    <div class="bg-white rounded shadow p-4 mb-6">
      <h2 class="text-lg font-bold mb-4">Record Sale</h2>
      <form id="sales-form" class="space-y-4">
        <select id="sale_product" class="w-full border p-2 rounded" required>
          <option value="">Select Product</option>
        </select>
        <input type="number" id="sale_quantity" placeholder="Quantity Sold" class="w-full border p-2 rounded" required>
        <select id="sale_platform" class="w-full border p-2 rounded" required>
          <option value="">Select Platform</option>
          <option value="Shopee">Shopee</option>
          <option value="Lazada">Lazada</option>
          <option value="Facebook">Facebook</option>
          <option value="Instagram">Instagram</option>
          <option value="Walk-in">Walk-in</option>
        </select>
        <button type="submit" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded">
          Record Sale
        </button>
      </form>
    </div>

    <div class="flex space-x-4 border-b mb-4">
      <button id="tab-sales" class="p-2 border-b-2 border-purple-500 font-semibold">Sales</button>
      <button id="tab-returns" class="p-2 hover:border-purple-500">Returns</button>
    </div>

    
    <!-- Sales Section -->
    <div id="sales-section">
      <!-- Existing sales form & history here -->
      <div class="bg-white p-4 rounded shadow mb-4 flex items-center gap-4">
        <label for="month-selector" class="font-medium">Select Month:</label>
        <input type="month" id="month-selector" class="border p-2 rounded">
  
  
        <div id="monthly-summary" class="bg-white p-4 rounded shadow mb-4">
          <h3 class="text-lg font-bold">Monthly Sales & Profit</h3>
          <p>Total Sales: <span id="monthly-sales" class="font-semibold text-green-600">â‚±0</span></p>
          <p>Total Profit: <span id="monthly-profit" class="font-semibold text-blue-600">â‚±0</span></p>
        </div>
      </div>
  
      <div class="bg-white p-4 rounded shadow mt-4">
        <h2 class="text-lg font-bold mb-4">Monthly Sales & Profit Trend</h2>
        <canvas id="monthlyTrendChart" height="100"></canvas>
      </div>
  
  
  
      <!-- Sales History -->
      <div class="bg-white rounded shadow p-4">
        <h2 class="text-lg font-bold mb-4">Sales History</h2>
        <div id="sales-list" class="space-y-2">
          <!-- Sales history will load here -->
        </div>
      </div>
    </div>

    <div id="returns-section" class="hidden">
      <h2 class="text-lg font-bold mb-4">Return Management</h2>
    
      <form id="return-form" class="space-y-2 bg-gray-100 p-4 rounded mb-4">
        <select id="return-sale-id" class="w-full border p-2 rounded"></select>
        <input type="number" id="return-quantity" placeholder="Quantity" class="w-full border p-2 rounded">
        <input type="text" id="return-reason" placeholder="Reason" class="w-full border p-2 rounded">
        <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded">Submit Return</button>
      </form>
    
      <div id="returns-list" class="space-y-2"></div>
    </div>
    
  </main>

  <!-- Sales History Modal -->
  <div id="history-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white p-6 rounded-lg max-w-xl w-full shadow-lg relative">
      <h2 class="text-xl font-bold mb-4" id="history-title">Sales History</h2>
      <div id="history-content" class="space-y-2 max-h-96 overflow-y-auto">
        <!-- Sales history rows will be injected here -->
      </div>
      <button id="close-history" class="absolute top-2 right-2 text-gray-600 hover:text-black text-xl">&times;</button>
    </div>
  </div>

  <script src="js/sales.js"></script>

</body>

</html>